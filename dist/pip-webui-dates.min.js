!function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("date_directive/date.html",'<div class="pip-date layout-row flex" tabindex="-1"><md-input-container class="input-container flex"><md-select class="pip-date-day flex" ng-disabled="disableControls" ng-model="day" placeholder="{{dayLabel}}" ng-change="onDayChanged()"><md-option ng-value="opt" ng-repeat="opt in days track by opt">{{:: opt }}</md-option></md-select></md-input-container><div class="input-container-separator flex-fixed"></div><md-input-container class="input-container flex"><md-select class="pip-date-monthflex" ng-disabled="disableControls" ng-model="month" placeholder="{{monthLabel}}" ng-change="onMonthChanged()"><md-option ng-value="opt.id" ng-repeat="opt in months track by opt.id">{{:: opt.name }}</md-option></md-select></md-input-container><div class="input-container-separator flex-fixed"></div><md-input-container class="input-container flex"><md-select class="pip-date-year flex" ng-disabled="disableControls" ng-model="year" placeholder="{{yearLabel}}" ng-change="onYearChanged()"><md-option ng-value="opt" ng-repeat="opt in years track by opt">{{:: opt }}</md-option></md-select></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("date_range_directive/date_range.html",'<div class="pip-date-range layout-row flex" tabindex="-1"><md-input-container ng-show="isDay()" class="input-container pip-day flex" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-day" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onDayClick()" ng-model="day" ng-change="onDayChanged()" placeholder="{{dayLabel}}" aria-label="DAY"><md-option ng-value="opt" ng-repeat="opt in days track by opt">{{nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container ng-show="isWeek()" class="input-container flex" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-week" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" ng-model="week" ng-change="onWeekChange()" placeholder="{{weekLabel}}" aria-label="WEEK"><md-option ng-value="opt.id" ng-repeat="opt in weeks track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'space16\': $mdMedia(\'gt-xs\'), \'space8\': $mdMedia(\'xs\')}" ng-show="isDay() || isWeek()"></div><md-input-container ng-show="isMonth() && !monthFormatShort" class="input-container flex" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-month" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onMonthClick()" ng-model="month" ng-change="onMonthChanged()" placeholder="{{monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in months track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container ng-show="isMonth() && monthFormatShort" class="flex input-container" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-month" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onMonthClick()" ng-model="month" ng-change="onMonthChanged()" placeholder="{{monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in shortMonths track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'space16\': $mdMedia(\'gt-xs\'), \'space8\': $mdMedia(\'xs\')}" ng-show="isMonth()"></div><md-input-container class="input-container flex" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-year" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onYearClick()" ng-model="year" ng-change="onYearChanged()" placeholder="{{yearLabel}}" aria-label="YEAR"><md-option ng-value="opt" ng-repeat="opt in years track by opt">{{ opt }}</md-option></md-select></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("time_range_edit_directive/time_range_edit.html",'<div class="event-edit layout-row layout-xs-column flex layout-align-start-start"><div flex="47" class="start-time-container"><p class="text-caption text-grey">{{startLabel}}</p><div class="layout-row layout-align-space-between-center"><div class="pip-datepicker-container" flex="49"><md-datepicker ng-model="data.startDate" xmd-placeholder="{{startLabel}}" ng-change="onChangeStartDate()" ng-disabled="isDisabled()" aria-label="START-DATE"></md-datepicker></div><div flex=""><md-input-container class="input-container"><md-select aria-label="START-TIME" ng-model="data.startTime" ng-disabled="isDisabled()" ng-change="onChangeStartTime()"><md-option ng-value="opt.id" ng-repeat="opt in intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex="47" class="end-time-container"><p class="text-caption text-grey">{{endLabel}}</p><div class="layout-row layout-align-space-between-center"><div class="pip-datepicker-container flex-49"><md-datepicker ng-model="data.endDate" xmd-placeholder="{{endLabel}}" ng-disabled="isDisabled()" ng-change="onChangeEndDate()" aria-label="END-DATE"></md-datepicker></div><div flex=""><md-input-container class="input-container"><md-select aria-label="END-TIME" ng-model="data.endTime" ng-change="onChangeEndTime()" ng-disabled="isDisabled()"><md-option ng-value="opt.id" ng-repeat="opt in intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("time_range_directive/time_range.html",'<p><span ng-if="data.start != null">{{data.start | formatShortDateTime}}</span> <span class="separator" ng-if="data.start && data.end">-</span> <span ng-if="data.end != null">{{data.end | formatShortDateTime}}</span></p>')}])}(),function(){"use strict";var t=angular.module("pipDates.Translate",[]);t.filter("translate",["$injector",function(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}])}(),function(){"use strict";angular.module("pipDates",["pipDate","pipTimeRange","pipDateTime","pipTimeRangeEdit","pipDateRange","pipDates.Translate"])}();var pip;!function(t){var e;!function(t){"use strict";angular.module("pipDateTime",["pipDateTime.Service","pipDateTime.Filter"])}(e=t.datetime||(t.datetime={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";function e(t){"ngInject";return function(e,n){return t.formatTime(e,n)}}function n(t){"ngInject";return function(e,n){return t.formatDateOptional(e,n)}}function a(t){"ngInject";return function(e){return t.formatLongDate(e)}}function r(t){"ngInject";return function(e){return t.formatShortDate(e)}}function o(t){"ngInject";return function(e){return t.formatMonth(e)}}function i(t){"ngInject";return function(e){return t.formatLongMonth(e)}}function m(t){"ngInject";return function(e){return t.formatYear(e)}}function d(t){"ngInject";return function(e){return t.formatWeek(e)}}function p(t){"ngInject";return function(e){return t.formatShortWeek(e)}}function l(t){"ngInject";return function(e){return t.formatShortDateTime(e)}}function u(t){"ngInject";return function(e){return t.formatLongDateTime(e)}}function s(t){"ngInject";return function(e){return t.formatShortTime(e)}}function f(t){"ngInject";return function(e){return t.formatLongTime(e)}}function c(t){"ngInject";return function(e){return t.formatShortDayOfWeek(e)}}function g(t){"ngInject";return function(e){return t.formatLongDayOfWeek(e)}}function h(t){"ngInject";return function(e){return t.formatDateNumber(e)}}function D(t){"ngInject";return function(e){return t.formatLongDateNumber(e)}}function y(t){"ngInject";return function(e){return t.formatTimeNumber(e)}}function T(t){"ngInject";return function(e){return t.formatLongTimeNumber(e)}}function S(t){"ngInject";return function(e){return t.formatLongMonthDay(e)}}function v(t){"ngInject";return function(e){return t.formatShortMonthDay(e)}}function w(t){"ngInject";return function(e,n){return t.formatDateRange(e,n)}}function b(t){"ngInject";return function(e,n){return t.formatDateTimeRange(e,n)}}function _(t){"ngInject";return function(e){return t.formatISOWeek(e)}}function k(t){"ngInject";return function(e){return t.formatShortISOWeek(e)}}function L(t){"ngInject";return function(e){return t.formatISOWeekOrdinal(e)}}function M(t){"ngInject";return function(e){return t.formatDateY(e)}}function E(t){"ngInject";return function(e){return t.formatLongDateY(e)}}function C(t){"ngInject";return function(e){return t.formatMillisecondsToSeconds(e)}}function N(t){"ngInject";return function(e,n){return t.formatElapsedInterval(e,n)}}function O(t){"ngInject";return function(e){return t.getDateJSON(e)}}e.$inject=["pipDateTime"],n.$inject=["pipDateTime"],a.$inject=["pipDateTime"],r.$inject=["pipDateTime"],o.$inject=["pipDateTime"],i.$inject=["pipDateTime"],m.$inject=["pipDateTime"],d.$inject=["pipDateTime"],p.$inject=["pipDateTime"],l.$inject=["pipDateTime"],u.$inject=["pipDateTime"],s.$inject=["pipDateTime"],f.$inject=["pipDateTime"],c.$inject=["pipDateTime"],g.$inject=["pipDateTime"],h.$inject=["pipDateTime"],D.$inject=["pipDateTime"],y.$inject=["pipDateTime"],T.$inject=["pipDateTime"],S.$inject=["pipDateTime"],v.$inject=["pipDateTime"],w.$inject=["pipDateTime"],b.$inject=["pipDateTime"],_.$inject=["pipDateTime"],k.$inject=["pipDateTime"],L.$inject=["pipDateTime"],M.$inject=["pipDateTime"],E.$inject=["pipDateTime"],C.$inject=["pipDateTime"],N.$inject=["pipDateTime"],O.$inject=["pipDateTime"],angular.module("pipDateTime.Filter",[]).filter("formatTime",e).filter("formatDateOptional",n).filter("formatShortDate",r).filter("formatLongDate",a).filter("formatMonth",o).filter("formatLongMonth",i).filter("formatYear",m).filter("formatWeek",d).filter("formatShortWeek",p).filter("formatShortDateTime",l).filter("formatLongDateTime",u).filter("formatShortTime",s).filter("formatLongTime",f).filter("formatShortDayOfWeek",c).filter("formatLongDayOfWeek",g).filter("formatDateNumber",h).filter("formatLongDateNumber",D).filter("formatTimeNumber",y).filter("formatLongTimeNumber",T).filter("formatLongMonthDay",S).filter("formatShortMonthDay",v).filter("formatDateRange",w).filter("formatDateTimeRange",b).filter("formatISOWeek",_).filter("formatShortISOWeek",k).filter("formatISOWeekOrdinal",L).filter("formatDateY",M).filter("formatLongDateY",E).filter("formatMillisecondsToSeconds",C).filter("formatElapsedInterval",N)}(e=t.datetime||(t.datetime={}))}(pip||(pip={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},pip;!function(t){var e;!function(t){"use strict";var e=function(){function t(){this._momentRanged=new Array("year","month","week","isoweek","day"),this._defaultFormat="LL"}return t.prototype.isUndefinedOrNull=function(t){return angular.isUndefined(t)||null===t},t.prototype.getRange=function(t){if(this.isUndefinedOrNull(t))return"day";var e=this._momentRanged.indexOf(t);return e<0?"day":this._momentRanged[e]},t.prototype.getOperationRange=function(t){if(this.isUndefinedOrNull(t))return"day";var e="isoweek"==t?"week":t,n=this._momentRanged.indexOf(e);return n<0?"day":this._momentRanged[n]},t.prototype.formatDateTime=function(t,e){var n,a;return this.isUndefinedOrNull(t)?"":(n=moment(t),n.isValid()?(a=e?e:this._defaultFormat,n.format(a)):"")},t.prototype.formatDateTimeY=function(t,e){var n,a,r;return this.isUndefinedOrNull(t)?"":(n=moment(t),n.isValid()?(a=moment(),r=moment.localeData().longDateFormat(e?e:this._defaultFormat),a.year()==n.year()&&(r=r.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"")),n.format(r)):"")},t.prototype.formatDay=function(t,e){var n,a=moment.localeData().longDateFormat(e?e:this._defaultFormat),r=a.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"").replace(/M/g,"");return this.isUndefinedOrNull(t)?"":(n=moment(t),n.format(r))},t.prototype.formatMonthDay=function(t,e){var n,a=e?e:this._defaultFormat,r=moment.localeData().longDateFormat(a),o=r.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"");return this.isUndefinedOrNull(t)?"":(n=moment(t),n.format(o))},t.prototype.formatRange=function(t,e,n){var a,r;n?n:this._defaultFormat;if(a=this.isUndefinedOrNull(t)?null:moment(t),r=this.isUndefinedOrNull(e)?null:moment(e),null===a&&null===r)return"";if(null===a)return r.format(n);if(null===r||a.isSame(r))return a.format(n);if(a.isAfter(r))throw new Error("Date range error. Start date is more than end date.");return a.year()==r.year()?a.month()==r.month()?this.formatDay(a,n)+"-"+r.format(n):this.formatMonthDay(a,n)+"-"+r.format(n):a.format(n)+"-"+r.format(n)},t.prototype.toStartRange=function(t,e){var n;return this.isUndefinedOrNull(t)?"":(n=moment(t),n.isValid()?n.startOf(e).toDate():"")},t.prototype.toEndRange=function(t,e,n){var a,r,o;return this.isUndefinedOrNull(t)?"":(angular.isNumber(n)||(o=0),a=moment(t),a.isValid()?(r=o?a.startOf(e).add(o,"milliseconds"):a.startOf(e),a.startOf(e).toDate()):"")},t.prototype.formatTime=function(t,e){return this.formatDateTime(t,"LLL")},t.prototype.formatDateOptional=function(t,e){return this.formatDateTime(t,"L")},t.prototype.formatShortDate=function(t){return this.formatDateTime(t,"L")},t.prototype.formatLongDate=function(t){return this.formatDateTime(t,"LL")},t.prototype.formatMonth=function(t){return this.formatDateTime(t,"MM")},t.prototype.formatLongMonth=function(t){return this.formatDateTime(t,"MMMM")},t.prototype.formatYear=function(t){return this.formatDateTime(t,"YYYY")},t.prototype.formatWeek=function(t){return this.formatDateTime(t,"ww")},t.prototype.formatShortWeek=function(t){return this.formatDateTime(t,"w")},t.prototype.formatShortDateTime=function(t){return this.formatDateTime(t,"LLL")},t.prototype.formatLongDateTime=function(t){return this.formatDateTime(t,"LLLL")},t.prototype.formatShortTime=function(t){return this.formatDateTime(t,"LT")},t.prototype.formatLongTime=function(t){return this.formatDateTime(t,"LTS")},t.prototype.formatShortDayOfWeek=function(t){return this.formatDateTime(t,"dd")},t.prototype.formatLongDayOfWeek=function(t){return this.formatDateTime(t,"dddd")},t.prototype.formatDateNumber=function(t){return this.formatDateTime(t,"l")},t.prototype.formatLongDateNumber=function(t){return this.formatDateTime(t,"ll")},t.prototype.formatTimeNumber=function(t){return this.formatDateTime(t,"LLL")},t.prototype.formatLongTimeNumber=function(t){return this.formatDateTime(t,"LLLL")},t.prototype.formatLongMonthDay=function(t){return this.formatMonthDay(t,"LL")},t.prototype.formatShortMonthDay=function(t){return this.formatMonthDay(t,"L")},t.prototype.formatDateRange=function(t,e){return this.formatRange(t,e,"LL")},t.prototype.formatDateTimeRange=function(t,e){return this.formatRange(t,e,"LLL")},t.prototype.formatISOWeek=function(t){return this.formatDateTime(t,"WW")},t.prototype.formatShortISOWeek=function(t){return this.formatDateTime(t,"W")},t.prototype.formatISOWeekOrdinal=function(t){return this.formatDateTime(t,"Wo")},t.prototype.formatDateY=function(t){return this.formatDateTimeY(t,"L")},t.prototype.formatLongDateY=function(t){return this.formatDateTimeY(t,"LL")},t.prototype.formatMillisecondsToSeconds=function(t){return""},t.prototype.formatElapsedInterval=function(t,e){var n,a;return this.isUndefinedOrNull(t)?"":(a=this.isUndefinedOrNull(e)?moment():moment(e),n=moment(t),n.isValid()&&a.isValid()?moment(n).fromNow(a):"")},t.prototype.getDateJSON=function(t){return JSON.stringify(moment(t))},t.prototype.getNextStart=function(t,e){var n,a,r;return this.isUndefinedOrNull(t)?"":(n=moment(t),n.isValid()?(a=this.getRange(e),r=moment(n).startOf(a).add(this.getOperationRange(a)),r.toDate()):"")},t.prototype.getPrevStart=function(t,e){var n,a,r;return this.isUndefinedOrNull(t)?"":(n=moment(t),n.isValid()?(a=this.getRange(e),r=moment(n).startOf(a).add(-1,this.getOperationRange(a)),r.toDate()):"")},t.prototype.getNowStart=function(t){var e,n,a;return e=moment(),e.isValid()?(n=this.getRange(t),a=moment(e).startOf(n),a.toDate()):""},t.prototype.addHours=function(t,e){var n;return this.isUndefinedOrNull(t)||!angular.isNumber(e)?"":(n=moment(t),n.isValid()?n.add(e,"hours").toDate():"")},t.prototype.toStartDay=function(t){return this.toStartRange(t,"day")},t.prototype.toEndDay=function(t,e){return this.toEndRange(t,"day",e)},t.prototype.toStartWeek=function(t){return this.toStartRange(t,"week")},t.prototype.toEndWeek=function(t,e){return this.toEndRange(t,"week",e)},t.prototype.toStartMonth=function(t){return this.toStartRange(t,"month")},t.prototype.toEndMonth=function(t,e){return this.toEndRange(t,"month",e)},t.prototype.toStartYear=function(t){return this.toStartRange(t,"year")},t.prototype.toEndYear=function(t,e){return this.toEndRange(t,"year",e)},t}(),n=function(){function t(t){this._datetime=t}return t.prototype.formatTime=function(t,e){return this._datetime.formatTime(t,e)},t.prototype.formatDateOptional=function(t,e){return this._datetime.formatDateOptional(t,e)},t.prototype.formatShortDate=function(t){return this._datetime.formatShortDate(t)},t.prototype.formatLongDate=function(t){return this._datetime.formatLongDate(t)},t.prototype.formatMonth=function(t){return this._datetime.formatMonth(t)},t.prototype.formatLongMonth=function(t){return this._datetime.formatLongMonth(t)},t.prototype.formatYear=function(t){return this._datetime.formatYear(t)},t.prototype.formatWeek=function(t){return this._datetime.formatWeek(t)},t.prototype.formatShortWeek=function(t){return this._datetime.formatShortWeek(t)},t.prototype.formatShortDateTime=function(t){return this._datetime.formatShortDateTime(t)},t.prototype.formatLongDateTime=function(t){return this._datetime.formatLongDateTime(t)},t.prototype.formatShortTime=function(t){return this._datetime.formatShortTime(t)},t.prototype.formatLongTime=function(t){return this._datetime.formatLongTime(t)},t.prototype.formatShortDayOfWeek=function(t){return this._datetime.formatShortDayOfWeek(t)},t.prototype.formatLongDayOfWeek=function(t){return this._datetime.formatLongDayOfWeek(t)},t.prototype.formatDateNumber=function(t){return this._datetime.formatDateNumber(t)},t.prototype.formatLongDateNumber=function(t){return this._datetime.formatLongDateNumber(t)},t.prototype.formatTimeNumber=function(t){return this._datetime.formatTimeNumber(t)},t.prototype.formatLongTimeNumber=function(t){return this._datetime.formatLongTimeNumber(t)},t.prototype.formatLongMonthDay=function(t){return this._datetime.formatLongMonthDay(t)},t.prototype.formatShortMonthDay=function(t){return this._datetime.formatShortMonthDay(t)},t.prototype.formatDateRange=function(t,e){return this._datetime.formatDateRange(t,e)},t.prototype.formatDateTimeRange=function(t,e){return this._datetime.formatDateTimeRange(t,e)},t.prototype.formatISOWeek=function(t){return this._datetime.formatISOWeek(t)},t.prototype.formatShortISOWeek=function(t){return this._datetime.formatShortISOWeek(t)},t.prototype.formatISOWeekOrdinal=function(t){return this._datetime.formatISOWeekOrdinal(t)},t.prototype.formatDateY=function(t){return this._datetime.formatDateY(t)},t.prototype.formatLongDateY=function(t){return this._datetime.formatLongDateY(t)},t.prototype.formatMillisecondsToSeconds=function(t){return this._datetime.formatMillisecondsToSeconds(t)},t.prototype.formatElapsedInterval=function(t,e){return this._datetime.formatElapsedInterval(t,e)},t.prototype.getDateJSON=function(t){return this._datetime.getDateJSON(t)},t.prototype.getNextStart=function(t,e){return this._datetime.getNextStart(t,e)},t.prototype.getPrevStart=function(t,e){return this._datetime.getPrevStart(t,e)},t.prototype.getNowStart=function(t){return this._datetime.getNowStart(t)},t.prototype.addHours=function(t,e){return this._datetime.addHours(t,e)},t.prototype.toStartDay=function(t){return this._datetime.toStartDay(t)},t.prototype.toEndDay=function(t,e){return this._datetime.toEndDay(t,e)},t.prototype.toStartWeek=function(t){return this._datetime.toStartWeek(t)},t.prototype.toEndWeek=function(t,e){return this._datetime.toEndWeek(t,e)},t.prototype.toStartMonth=function(t){return this._datetime.toStartMonth(t)},t.prototype.toEndMonth=function(t,e){return this._datetime.toEndMonth(t,e)},t.prototype.toStartYear=function(t){return this._datetime.toStartYear(t)},t.prototype.toEndYear=function(t,e){return this._datetime.toEndYear(t,e)},t}(),a=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.$get=function(){"ngInject";return null==this._service&&(this._service=new n(this)),this._service},e}(e);angular.module("pipDateTime.Service",[]).provider("pipDateTime",a)}(e=t.datetime||(t.datetime={}))}(pip||(pip={})),function(t,e){"use strict";var n=t.module("pipDate",["pipDates.Templates"]);n.directive("pipDate",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",ngChange:"&"},templateUrl:"date_directive/date.html",controller:"pipDateController"}}),n.controller("pipDateController",["$scope","$element","$injector",function(n,a,r){function o(t,e){var n,a=31,r=[];for(4===t||6===t||9===t||11===t?a=30:2===t&&(a=e&&e%4===0?29:28),n=1;n<=a;n++)r.push(n);return r}function i(){var t,e=[];for(t=1;t<=12;t++)e.push({id:t,name:f[t-1]});return e}function m(){var t,e=(new Date).getFullYear(),a="future"===n.timeMode?e:e-100,r="past"===n.timeMode?e:e+100,o=[];if("past"===n.timeMode)for(t=r;t>=a;t--)o.push(t);else for(t=a;t<=r;t++)o.push(t);return o}function d(){var t=o(n.month,n.year);n.days.length!==t.length&&(n.day>t.length&&(n.day=t.length),n.days=t)}function p(t){var a=t?e.isDate(t)?t:new Date(t):null,r=a?a.getDate():null,i=a?a.getMonth()+1:null,m=a?a.getFullYear():null;n.month!==i&&n.year!==m&&(n.days=o(n.month,n.year)),n.day=r,n.month=i,n.year=m}function l(){var t;n.day&&n.month&&n.year&&(t=new Date(n.year,n.month-1,n.day,0,0,0,0),n.model=t,n.ngChange())}var u,s=moment.localeData(),f=t.isArray(s._months)?s._months:s._months.format,c=(t.isArray(s._weekdays)?s._weekdays:s._weekdays.format,s._weekdaysMin,s._week.dow,r.has("pipTranslate")?r.get("pipTranslate"):null);c?(c.setTranslations("en",{DAY:"Day",MONTH:"Month",YEAR:"Year"}),c.setTranslations("ru",{DAY:"День",MONTH:"Месяц",YEAR:"Год"}),n.dayLabel=c.translate("DAY"),n.monthLabel=c.translate("MONTH"),n.yearLabel=c.translate("YEAR")):(n.dayLabel="Day",n.monthLabel="Month",n.yearLabel="Year"),n.onDayChanged=function(){l()},n.onMonthChanged=function(){d(),l()},n.onYearChanged=function(){d(),l()},u=n.model?e.isDate(n.model)?n.model:new Date(n.model):null,n.day=u?u.getDate():null,n.month=u?u.getMonth()+1:null,n.year=u?u.getFullYear():null,n.days=o(n.month,n.year),n.months=i(),n.years=m(),n.disableControls=!!n.disabled&&n.disabled(),n.$watch("model",function(t){p(t)}),n.$watch(n.disabled,function(t){n.disableControls=t})}])}(window.angular,window._),function(t,e){"use strict";var n=t.module("pipDateRange",["pipDates.Templates"]);n.directive("pipDateRange",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",pipChanged:"&",pipDateRangeType:"@",pipDateFormat:"@",pipNoLine:"@"},templateUrl:"date_range_directive/date_range.html",controller:"pipDateRangeController"}}),n.controller("pipDateRangeController",["$scope","$element","$mdMedia","$rootScope","$injector",function(n,a,r,o,i){function m(){M.day=n.day,M.month=n.month,M.year=n.year,M.week=n.week,M.dateRangeType=n.pipDateRangeType,M.model=n.model}function d(){n.days=s(n.month,n.year),n.weeks=g(n.month,n.year),n.months=h(),n.shortMonths=h(!0),n.years=D()}function p(){(!L.model||L.model&&L.model.getTime()>=n.model.getTime())&&n.weeks&&n.weeks[n.week]&&n.weeks[n.week].id<=0&&(n.month<12?n.month+=1:(n.month=1,n.year+=1),d())}function l(){var t;t=n.model?new Date(n.model):null,n.day=t?t.getUTCDate():null,n.month=t?t.getUTCMonth()+1:null,n.year=t?t.getUTCFullYear():null,n.week=t?f(n.day,n.month-1,n.year):null,d(),"weekly"===n.pipDateRangeType?(p(),T()):y(),v()}function u(t,e){var n=31;return 4===t||6===t||9===t||11===t?n=30:2===t&&(n=e&&e%4===0?29:28),n}function s(t,e){var a,r,o;for(a=u(t,e),n.nameDays=[],r=[],o=1;o<=a;o++)r.push(o),n.nameDays.push(N[moment([e,t-1,o]).weekday()]);return r}function f(t,e,n){var a,r,o;return a=new Date(Date.UTC(n,e,t)),r=a.getUTCDay()?a.getUTCDay():7,o=1===r?t:t+1-r}function c(t,e,n){var a,r;return a=t+6>e?e-t-6:t+6,r=t>0?t:n+t,r.toString()+" - "+Math.abs(a).toString()}function g(t,e){var n,a,r,o;for(n=[],a=u(t,e),o=f(1,t-1,e),r=t-1?u(t-1,e):u(12,e-1);o<a+1;)n.push({id:o,name:c(o,a,r)}),o+=7;return n}function h(){var t,e=[];for(t=1;t<=12;t++)e.push({id:t,name:C[t-1]});return e}function D(){var t,e,a,r=[];switch(n.timeMode){case"future":t=b,a=b+100;break;case"past":t=b-100,a=b;break;case"now":t=b-50,a=b+100;break;default:t=b-50,a=b+50}if("future"===n.timeMode)for(e=t;e<=a;e++)r.push(e);else for(e=a;e>=t;e--)r.push(e);return r}function y(){var t=s(n.month,n.year);switch(n.pipDateRangeType){case"monthly":n.day=1;break;case"yearly":n.month=1,n.day=1;break;default:n.days.length!==t.length&&n.day>t.length&&(n.day=t.length)}n.days=t}function T(){var t;t=g(n.month,n.year),n.week=f(n.week,n.month-1,n.year),n.weeks=t}function S(t){var e,a,r,o,i;e=t?new Date(t):null,a=e?e.getUTCDate():null,r=e?e.getUTCMonth()+1:null,o=e?e.getUTCFullYear():null,i=e?f(a,r-1,o):null,n.day===a&&n.month===r&&n.year===o&&n.week===i||(n.day=a,n.month=r,n.year=o,n.week=i,n.days=s(n.month,n.year),n.weeks=g(n.month,n.year))}function v(){var t;"weekly"===n.pipDateRangeType?(t=new Date(n.year,n.month-1,n.week,0,0,0,0),t=new Date(t.getTime()-6e4*t.getTimezoneOffset()),n.model=t):(t=new Date(n.year,n.month-1,n.day,0,0,0,0),t=new Date(t.getTime()-6e4*t.getTimezoneOffset()),n.model=t),L=e.cloneDeep(M),m(),n.onChange()}var w,b,_,k,L={},M={},E=moment.localeData(),C=t.isArray(E._months)?E._months:E._months.format,N=(t.isArray(E._weekdays)?E._weekdays:E._weekdays.format,E._weekdaysMin);E._week.dow;w=new Date,b=w.getUTCFullYear(),_=w.getUTCMonth()+1,k=w.getUTCDate(),n.onDayChanged=function(){v()},n.onMonthChanged=function(){if("weekly"===n.pipDateRangeType){var t,e;t=new Date(Date.UTC(n.year,n.month-1,1)),e=t.getUTCDay()?t.getUTCDay():7,n.week=f(e,n.month-1,n.year),p(),T()}else y();v()},n.onYearChanged=function(){var t,e;t=new Date(Date.UTC(n.year,n.month-1,1)),e=t.getUTCDay()?t.getUTCDay():7,"weekly"===n.pipDateRangeType?(n.week=f(e,n.month-1,n.year),T(),p()):y(),v()},n.onWeekChange=function(){"weekly"===n.pipDateRangeType?(T(),p()):y(),v()},n.isDay=function(){return"daily"===n.pipDateRangeType},n.isWeek=function(){return"weekly"===n.pipDateRangeType},n.isMonth=function(){return"daily"===n.pipDateRangeType||"weekly"===n.pipDateRangeType||"monthly"===n.pipDateRangeType},n.onChange=function(){n.pipChanged&&n.pipChanged()},n.$mdMedia=r,l(),n.disableControls=!!n.disabled&&n.disabled(),n.$watch("model",function(t,e){t!==e&&S(t)}),n.$watch(n.disabled,function(t){n.disableControls=t}),n.$watch("pipDateRangeType",function(t,e){t!==e&&e&&l()}),n.onYearClick=function(){n.year||(n.year=b)},n.onMonthClick=function(){n.month||(n.month=_)},n.onDayClick=function(){n.year||(n.day=k)}}])}(window.angular,window._),function(t,e){"use strict";var n=t.module("pipTimeRangeEdit",[]);n.directive("pipTimeRangeEdit",function(){return{restrict:"EA",scope:{pipStartDate:"=",pipChanged:"&",pipEndDate:"=",pipStartLabel:"@",pipEndLabel:"@",disabled:"&ngDisabled",pipSize:"="},templateUrl:"time_range_edit_directive/time_range_edit.html",controller:"pipTimeRangeEditController"}}),n.controller("pipTimeRangeEditController",["$scope","$element","$attrs","$injector","pipDateTime",function(t,n,a,r,o){function i(t){return t?new Date(t):null}function m(){var e,n;return t.data.startDate&&t.data.endDate?(e=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),n=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),n-e):null}function d(){var e,n,a;return t.data.startDate?(t.data.startTime||(t.data.endTime?t.data.startTime=0===t.data.endTime?0:t.data.endTime-30:(e=new Date,e=e.getTime()-o.toStartDay(e),t.data.startTime=30*Math.floor(e/18e5))),t.data.endDate?(n=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),void(t.data.duration?(a=new Date(n.getTime()+t.data.duration),t.data.endDate=o.toStartDay(a),a=a.getTime()-t.data.endDate.getTime(),t.data.endTime=30*Math.floor(a/18e5)):(a=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),n>=a&&(t.data.endDate=o.toStartDay(new Date(n.getTime()+18e5)),t.data.endTime=(t.data.startTime+30)%1440)))):void(t.data.endTime=null)):void(t.data.startTime=null)}function p(){var e,n,a;return t.data.endDate?(t.data.endTime||(t.data.startTime?t.data.endTime=1410===t.data.startTime?1410:t.data.startTime+30:(e=new Date,e=e.getTime()-o.toStartDay(e),t.data.endTime=30*Math.floor(e/18e5))),t.data.startDate?(n=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),a=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),n>=a&&(t.data.startDate=o.toStartDay(new Date(a.getTime()-18e5)),t.data.startTime=t.data.endTime%1440===0?1410:t.data.endTime-30),void(t.data.duration=m())):void(t.data.startTime=null)):void(t.data.endTime=null)}function l(){var e;t.data.bind=!1,t.data.startDate&&(e=t.data.startTime?60*t.data.startTime*1e3:0,t.pipStartDate=new Date(t.data.startDate.getTime()+e)),t.data.endDate&&(e=t.data.endTime?60*t.data.endTime*1e3:0,t.pipEndDate=new Date(t.data.endDate.getTime()+e)),t.data.bind=!0}function u(){var n,a;null!==t.pipStartDate&&void 0!==t.pipStartDate&&(n=e.isDate(t.pipStartDate)?t.pipStartDate:null,n||(n=i(t.pipStartDate)),t.data.startDate=o.toStartDay(n),t.data.startTime=(new Date(n)-t.data.startDate)/6e4),null!==t.pipEndDate&&void 0!==t.pipEndDate&&(a=e.isDate(t.pipEndDate)?t.pipEndDate:null,n||(a=i(t.pipEndDate)),t.data.endDate=o.toStartDay(a),t.data.endTime=(new Date(a)-t.data.endDate)/6e4),d(),t.data.duration=m(),l()}function s(){var t,n,a,r;for(t=[],n=0;n<24;n++)for(a=0;a<2;a++)r=30*a,t.push({id:60*n+r,time:e.pad(n.toString(),3,"0").substr(0,2)+":"+e.pad(r.toString(),2,"0")});return t}function f(){t.data.startDate=null,t.data.startTime=null,t.data.endDate=null,t.data.endTime=null,t.data.duration=null}var c=r.has("pipTranslate")?r.get("pipTranslate"):null;c?(c.setTranslations("en",{EVENT_NEW_START_TIME:"Start time",EVENT_NEW_END_TIME:"End time"}),c.setTranslations("ru",{EVENT_NEW_START_TIME:"Начало",EVENT_NEW_END_TIME:"Конец"}),t.startLabel=t.pipStartLabel?c.translate(t.pipStartLabel):c.translate("EVENT_NEW_START_TIME"),t.endLabel=t.pipEndLabel?c.translate(t.pipEndLabel):c.translate("EVENT_NEW_END_TIME")):(t.startLabel=t.pipStartLabel?t.pipStartLabel:"Start time",t.endLabel=t.pipEndLabel?t.pipEndLabel:"End time"),t.intervalTimeCollection=s(),t.data={},f(),u(),t.onChangeStartDate=function(){d(),t.data.duration=m(),l(),t.pipChanged()},t.onChangeEndDate=function(){p(),t.data.duration=m(),l(),t.pipChanged()},t.onChangeStartTime=function(){t.data.startDate||(t.data.startDate=o.toStartDay(new Date)),d(),t.data.duration=m(),l(),t.pipChanged()},t.onChangeEndTime=function(){t.data.endDate||(t.data.endDate=o.toStartDay(new Date)),p(),t.data.duration=m(),l(),t.pipChanged()},t.isDisabled=function(){return!!t.disabled&&t.disabled()},t.$watchGroup([t.pipStartDate,t.pipEndDate],function(){t.data.bind&&(f(),u())}),t.$watch(t.disabled,function(e){t.disableControls=e}),n.addClass("pip-time-range-edit")}])}(window.angular,window._),function(t,e){"use strict";var n=t.module("pipTimeRange",[]);n.directive("pipTimeRange",function(){
return{restrict:"EA",scope:{pipStartDate:"=",pipEndDate:"="},templateUrl:"time_range_directive/time_range.html",link:function(t,n,a){function r(t){return t?new Date(t):null}function o(){null!==t.pipStartDate&&void 0!==t.pipStartDate&&(t.data.start=e.isDate(t.pipStartDate)?t.pipStartDate:r(t.pipStartDate))}function i(){null!==t.pipEndDate&&void 0!==t.pipEndDate&&(t.data.end=e.isDate(t.pipEndDate)?t.pipEndDate:r(t.pipEndDate))}function m(t){return null!=t&&(!!t&&(t=t.toString().toLowerCase(),"1"==t||"true"==t))}t.data={},t.data.start=null,t.data.end=null,o(),i(),m(a.pipRebind)&&(t.$watch("pipStartDate",function(){t.data.start=null,o()}),t.$watch("pipEndDate",function(){t.data.end=null,i()})),n.addClass("pip-time-range")}}})}(window.angular,window._);