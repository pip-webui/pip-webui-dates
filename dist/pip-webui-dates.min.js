!function(t){"use strict";t.module("pipDateTimes",["pipDate","pipDateRange","pipTimeRangeEdit","pipTimeRange","pipDatesUtils","pipDateFormat","pipDateTimeFilters"]),t.module("pipDateTimesControls",["pipDateTimes"])}(window.angular),function(t,e){"use strict";var a=t.module("pipDate",["pipBasicControls.Templates"]);a.directive("pipDate",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",ngChange:"&"},templateUrl:"date/date.html",controller:"pipDateController"}}),a.controller("pipDateController",["$scope","$element","pipTranslate",function(t,a,n){function r(t,e){var a,n=31,r=[];for(4===t||6===t||9===t||11===t?n=30:2===t&&(n=e&&e%4===0?29:28),a=1;a<=n;a++)r.push(a);return r}function i(){var t,e=[];for(t=1;t<=12;t++)e.push({id:t,name:n.translate("MONTH_"+t)});return e}function o(){var e,a=(new Date).getFullYear(),n="future"===t.timeMode?a:a-100,r="past"===t.timeMode?a:a+100,i=[];if("past"===t.timeMode)for(e=r;e>=n;e--)i.push(e);else for(e=n;e<=r;e++)i.push(e);return i}function u(){var e=r(t.month,t.year);t.days.length!==e.length&&(t.day>e.length&&(t.day=e.length),t.days=e)}function l(a){var n=a?e.isDate(a)?a:new Date(a):null,i=n?n.getDate():null,o=n?n.getMonth()+1:null,u=n?n.getFullYear():null;t.month!==o&&t.year!==u&&(t.days=r(t.month,t.year)),t.day=i,t.month=o,t.year=u}function D(){var e;t.day&&t.month&&t.year&&(e=new Date(t.year,t.month-1,t.day,0,0,0,0),t.model=e,t.ngChange())}var d;t.onDayChanged=function(){D()},t.onMonthChanged=function(){u(),D()},t.onYearChanged=function(){u(),D()},d=t.model?e.isDate(t.model)?t.model:new Date(t.model):null,t.day=d?d.getDate():null,t.month=d?d.getMonth()+1:null,t.year=d?d.getFullYear():null,t.dayLabel=n.translate("DAY"),t.monthLabel=n.translate("MONTH"),t.yearLabel=n.translate("YEAR"),t.days=r(t.month,t.year),t.months=i(),t.years=o(),t.disableControls=!!t.disabled&&t.disabled(),t.$watch("model",function(t){l(t)}),t.$watch(t.disabled,function(e){t.disableControls=e})}])}(window.angular,window._),function(t,e){"use strict";var a=t.module("pipDateRange",[]);a.directive("pipDateRange",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",pipChanged:"&",pipDateRangeType:"@",pipDateFormat:"@",pipNoLine:"@"},templateUrl:"date_range/date_range.html",controller:"pipDateRangeController"}}),a.controller("pipDateRangeController",["$scope","$element","pipTranslate","$mdMedia","$rootScope",function(t,a,n,r,i){function o(){N.day=t.day,N.month=t.month,N.year=t.year,N.week=t.week,N.dateRangeType=t.pipDateRangeType,N.model=t.model}function u(){t.days=m(t.month,t.year),t.weeks=M(t.month,t.year),t.months=f(),t.shortMonths=f(!0),t.years=s()}function l(){(!w.model||w.model&&w.model.getTime()>=t.model.getTime())&&t.weeks&&t.weeks[t.week]&&t.weeks[t.week].id<=0&&(t.month<12?t.month+=1:(t.month=1,t.year+=1),u())}function D(){var e;e=t.model?new Date(t.model):null,t.day=e?e.getUTCDate():null,t.month=e?e.getUTCMonth()+1:null,t.year=e?e.getUTCFullYear():null,t.week=e?T(t.day,t.month-1,t.year):null,u(),"weekly"===t.pipDateRangeType?(l(),g()):_(),c()}function d(t,e){var a=31;return 4===t||6===t||9===t||11===t?a=30:2===t&&(a=e&&e%4===0?29:28),a}function m(e,a){var n,r,o,u;for(u=i.$language||"en",n=d(e,a),t.nameDays=[],r=[],o=1;o<=n;o++)r.push(o),t.nameDays.push(t.daysWeek[u][new Date(a,e-1,o).getDay()]);return r}function T(t,e,a){var n,r,i;return n=new Date(Date.UTC(a,e,t)),r=n.getUTCDay()?n.getUTCDay():7,i=1===r?t:t+1-r}function p(t,e,a){var n,r;return n=t+6>e?e-t-6:t+6,r=t>0?t:a+t,r.toString()+" - "+Math.abs(n).toString()}function M(t,e){var a,n,r,i;for(a=[],n=d(t,e),i=T(1,t-1,e),r=t-1?d(t-1,e):d(12,e-1);i<n+1;)a.push({id:i,name:p(i,n,r)}),i+=7;return a}function f(){var t,e;for(t=[],e=1;e<=12;e++)t.push({id:e,name:n.translate("MONTH_"+e)});return t}function s(){var e,a,n,r=[];switch(t.timeMode){case"future":e=S,n=S+100;break;case"past":e=S-100,n=S;break;case"now":e=S-50,n=S+100;break;default:e=S-50,n=S+50}if("future"===t.timeMode)for(a=e;a<=n;a++)r.push(a);else for(a=n;a>=e;a--)r.push(a);return r}function _(){var e=m(t.month,t.year);switch(t.pipDateRangeType){case"monthly":t.day=1;break;case"yearly":t.month=1,t.day=1;break;default:t.days.length!==e.length&&t.day>e.length&&(t.day=e.length)}t.days=e}function g(){var e;e=M(t.month,t.year),t.week=T(t.week,t.month-1,t.year),t.weeks=e}function y(e){var a,n,r,i,o;a=e?new Date(e):null,n=a?a.getUTCDate():null,r=a?a.getUTCMonth()+1:null,i=a?a.getUTCFullYear():null,o=a?T(n,r-1,i):null,t.day===n&&t.month===r&&t.year===i&&t.week===o||(t.day=n,t.month=r,t.year=i,t.week=o,t.days=m(t.month,t.year),t.weeks=M(t.month,t.year))}function c(){var a;"weekly"===t.pipDateRangeType?(a=new Date(t.year,t.month-1,t.week,0,0,0,0),a=new Date(a.getTime()-6e4*a.getTimezoneOffset()),t.model=a):(a=new Date(t.year,t.month-1,t.day,0,0,0,0),a=new Date(a.getTime()-6e4*a.getTimezoneOffset()),t.model=a),w=e.cloneDeep(N),o(),t.onChange()}var h,S,E,O,w={},N={};h=new Date,S=h.getUTCFullYear(),E=h.getUTCMonth()+1,O=h.getUTCDate(),t.daysWeek={en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ru:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},t.onDayChanged=function(){c()},t.onMonthChanged=function(){if("weekly"===t.pipDateRangeType){var e,a;e=new Date(Date.UTC(t.year,t.month-1,1)),a=e.getUTCDay()?e.getUTCDay():7,t.week=T(a,t.month-1,t.year),l(),g()}else _();c()},t.onYearChanged=function(){var e,a;e=new Date(Date.UTC(t.year,t.month-1,1)),a=e.getUTCDay()?e.getUTCDay():7,"weekly"===t.pipDateRangeType?(t.week=T(a,t.month-1,t.year),g(),l()):_(),c()},t.onWeekChange=function(){"weekly"===t.pipDateRangeType?(g(),l()):_(),c()},t.isDay=function(){return"daily"===t.pipDateRangeType},t.isWeek=function(){return"weekly"===t.pipDateRangeType},t.isMonth=function(){return"daily"===t.pipDateRangeType||"weekly"===t.pipDateRangeType||"monthly"===t.pipDateRangeType},t.onChange=function(){t.pipChanged&&t.pipChanged()},t.$mdMedia=r,D(),t.disableControls=!!t.disabled&&t.disabled(),t.$watch("model",function(t,e){t!==e&&y(t)}),t.$watch(t.disabled,function(e){t.disableControls=e}),t.$watch("pipDateRangeType",function(t,e){t!==e&&e&&D()}),t.onYearClick=function(){t.year||(t.year=S)},t.onMonthClick=function(){t.month||(t.month=E)},t.onDayClick=function(){t.year||(t.day=O)}}])}(window.angular,window._),function(){"use strict";var t=angular.module("pipDateTimeFilters",["pipDateFormat"]);t.filter("formatDate",["pipDateFormat",function(t){return function(e,a){return t.formatDate(e,a)}}]),t.filter("formatLongDate",["pipDateFormat",function(t){return function(e){return t.formatLongDate(e)}}]),t.filter("formatLongDateWithYear",["pipDateFormat",function(t){return function(e){return t.formatLongDateWithYear(e)}}]),t.filter("formatMonth",["pipDateFormat",function(t){return function(e,a){return t.formatMonth(e,a)}}]),t.filter("formatShortDate",["pipDateFormat",function(t){return function(e){return t.formatShortDate(e)}}]),t.filter("formatShortDateWithYear",["pipDateFormat",function(t){return function(e){return t.formatShortDateWithYear(e)}}]),t.filter("formatLongMonth",["pipDateFormat",function(t){return function(e){return t.formatLongMonth(e)}}]),t.filter("formatYear",["pipDateFormat",function(t){return function(e){return t.formatYear(e)}}]),t.filter("formatShortWeek",["pipDateFormat",function(t){return function(e){return t.formatShortWeek(e)}}]),t.filter("formatTime",["pipDateFormat",function(t){return function(e,a){return t.formatTime(e,a)}}]),t.filter("formatLongTime",["pipDateFormat",function(t){return function(e){return t.formatLongTime(e)}}]),t.filter("formatShortTime",["pipDateFormat",function(t){return function(e){return t.formatShortTime(e)}}]),t.filter("formatLongDateTime",["pipDateFormat",function(t){return function(e){return t.formatLongDateTime(e)}}]),t.filter("formatShortDateTime",["pipDateFormat",function(t){return function(e){return t.formatShortDateTime(e)}}]),t.filter("formatElapsedInterval",["pipDateFormat",function(t){return function(e){return t.formatElapsedInterval(e)}}]),t.filter("formatElapsedTime",["pipDateFormat",function(t){return function(e){return t.formatElapsedTime(e)}}]),t.filter("formatMillisecondsToSeconds",["pipDateFormat",function(t){return function(e){return t.formatMillisecondsToSeconds(e)}}]),t.filter("formatDateRange",["pipDateFormat",function(t){return function(e,a){return t.formatDateRange(e,a)}}]),t.filter("formatDateTimeRange",["pipDateFormat",function(t){return function(e,a){return t.formatDateTimeRange(e,a)}}])}(),function(){"use strict";var t=angular.module("pipDateFormat",["pipUtils","pipTranslate"]);t.config(["pipTranslateProvider",function(t){t.translations("en",{MONTH_1:"January",MONTH_2:"February",MONTH_3:"March",MONTH_4:"April",MONTH_5:"May",MONTH_6:"June",MONTH_7:"July",MONTH_8:"August",MONTH_9:"September",MONTH_10:"October",MONTH_11:"November",MONTH_12:"December",MONTH_LONG_1:"January",MONTH_LONG_2:"February",MONTH_LONG_3:"March",MONTH_LONG_4:"April",MONTH_LONG_5:"May",MONTH_LONG_6:"June",MONTH_LONG_7:"July",MONTH_LONG_8:"August",MONTH_LONG_9:"September",MONTH_LONG_10:"October",MONTH_LONG_11:"November",MONTH_LONG_12:"December",MONTH_SHORT_1:"Jan",MONTH_SHORT_2:"Feb",MONTH_SHORT_3:"Mar",MONTH_SHORT_4:"Apr",MONTH_SHORT_5:"May",MONTH_SHORT_6:"Jun",MONTH_SHORT_7:"Jul",MONTH_SHORT_8:"Aug",MONTH_SHORT_9:"Sep",MONTH_SHORT_10:"Oct",MONTH_SHORT_11:"Nov",MONTH_SHORT_12:"Dec",DAY_1:"Monday",DAY_2:"Tuesday",DAY_3:"Wednesday",DAY_4:"Thursday",DAY_5:"Friday",DAY_6:"Saturday",DAY_7:"Sunday",ELAPSED_TODAY:"Today",ELAPSED_YESTERDAY:"Yesterday",ELAPSED_YEARS:"y",ELAPSED_MONTHS:"mth",ELAPSED_WEEKS:"w",ELAPSED_DAYS:"d",ELAPSED_HOURS:"h",ELAPSED_MINUTES:"m",ELAPSED_SECONDS:"s",ELAPSED_AT:"at",ELAPSED_AGO:"ago",ELAPSED_JUST_NOW:"Just now",ELAPSED_FEW_MIN_AGO:"Few min ago",ELAPSED_MIN_AGO:"min ago",ELAPSED_HOUR_AGO:"hour ago",ELAPSED_HOURS_AGO:"hours ago",ELAPSED_HOURS_AGO_MORE_THAN_FIVE:"hours ago"}),t.translations("ru",{MONTH_1:"январь",MONTH_2:"февраль",MONTH_3:"март",MONTH_4:"апрель",MONTH_5:"май",MONTH_6:"июнь",MONTH_7:"июль",MONTH_8:"август",MONTH_9:"сентябрь",MONTH_10:"октябрь",MONTH_11:"ноябрь",MONTH_12:"декабрь",MONTH_LONG_1:"января",MONTH_LONG_2:"февраля",MONTH_LONG_3:"марта",MONTH_LONG_4:"апреля",MONTH_LONG_5:"мая",MONTH_LONG_6:"июня",MONTH_LONG_7:"июля",MONTH_LONG_8:"августа",MONTH_LONG_9:"сентября",MONTH_LONG_10:"октября",MONTH_LONG_11:"ноября",MONTH_LONG_12:"декабря",MONTH_SHORT_1:"янв",MONTH_SHORT_2:"фев",MONTH_SHORT_3:"мар",MONTH_SHORT_4:"апр",MONTH_SHORT_5:"май",MONTH_SHORT_6:"июн",MONTH_SHORT_7:"июл",MONTH_SHORT_8:"авг",MONTH_SHORT_9:"сен",MONTH_SHORT_10:"окт",MONTH_SHORT_11:"ноя",MONTH_SHORT_12:"дек",DAY_1:"понедельник",DAY_2:"вторник",DAY_3:"среда",DAY_4:"четверг",DAY_5:"пятница",DAY_6:"суббота",DAY_7:"воскресенье",ELAPSED_TODAY:"Сегодня",ELAPSED_YESTERDAY:"Вчера",ELAPSED_YEARS:"г",ELAPSED_MONTHS:"мц",ELAPSED_WEEKS:"н",ELAPSED_DAYS:"д",ELAPSED_HOURS:"ч",ELAPSED_MINUTES:"м",ELAPSED_SECONDS:"с",ELAPSED_AT:"в",ELAPSED_AGO:"тн",ELAPSED_JUST_NOW:"Только что",ELAPSED_FEW_MIN_AGO:"Несколько мин тн",ELAPSED_MIN_AGO:"мин тн",ELAPSED_HOUR_AGO:"час тн",ELAPSED_HOURS_AGO:"часа тн",ELAPSED_HOURS_AGO_MORE_THAN_FIVE:"часов тн"})}]),t.factory("pipDateFormat",["pipDates","pipTranslate","$rootScope",function(t,e,a){function n(t){return t<10?"0"+t:t}function r(n,r,i){if(null==n)return"";var o=i||!1,n=_.isDate(n)?n:new Date(n),u=(new Date).getUTCFullYear(),l=n.getUTCFullYear(),D=n.getUTCMonth(),d=e.translate("MONTH_LONG_"+(D+1)),m=e.translate("MONTH_SHORT_"+(D+1)),T=e.translate("MONTH_"+(D+1)),p=n.getUTCDate(),M=t.toStartWeek(n),f=t.toEndWeek(n,-1);return 0==o&&"d MMMM yyyy"==r&&u===l&&(r="MMMM d"),0==o&&"d MMM yyyy"==r&&u===l&&(r="MMM d"),"MMM d"==r&&"ru"==a.$language&&(r="d MMM"),"MMMM d"==r&&"ru"==a.$language&&(r="d MMMM"),"d MMMM yyyy"==r?""+p+" "+d+" "+l:"MMMM d, yyyy"==r?""+T+" "+p+", "+l:"d MMM yyyy"==r?""+p+" "+m+" "+l:"MMM d, yyyy"==r?""+m+" "+p+", "+l:"d MMMM"==r?""+p+" "+d:"d MMM"==r?""+p+" "+m:"MMM d"==r?""+m+" "+p:"MMMM d"==r?""+d+" "+p:"yyyy/M/d"==r?""+l+"/"+D+"/"+p:"yyy-M-d"==r?""+l+"-"+D+"-"+p:"MMMM"==r?""+d+" "+l:"yyyy"==r?""+l:"ww"==r?""+M.getUTCDate()+" - "+f.getUTCDate()+" "+T+" "+l:""+p+" "+T+" "+l}function i(t){return r(t,"d MMMM yyyy")}function o(t){return r(t,"d MMM yyyy",!0)}function u(t){return r(t,"d MMMM yyyy",!0)}function l(t){return r(t,"d MMM yyyy")}function D(t){return r(t,"MMMM")}function d(t){return r(t,"yyyy")}function m(t){return r(t,"ww")}function T(t){return r(t,"d MMM")}function p(t){return"ru"==a.$language?r(t,"d MMMM"):r(t,"MMMM d")}function M(t,e){return t=t?_.isDate(t)?t:new Date(t):null,e=e?_.isDate(e)?e:new Date(e):null,null==t?"ru"==a.$language?r(e,"d MMM yyyy",!0):r(e,"MMM d, yyyy",!0):null==e||t==e?"ru"==a.$language?r(t,"d MMM yyyy",!0):r(t,"MMM d, yyyy",!0):t.getUTCFullYear()!==e.getUTCFullYear()?"ru"==a.$language?r(t,"d MMM yyyy",!0)+"-"+r(e,"d MMM yyyy",!0):r(t,"MMM d, yyyy",!0)+"-"+r(e,"MMM d, yyyy",!0):r(t,"d MMM")+" - "+r(e,"d MMM")+((new Date).getUTCFullYear()!==t.getUTCFullYear()?" "+r(t,"yyyy"):"")}function f(t,e){if(t=t?_.isDate(t)?t:new Date(t):null,e=e?_.isDate(e)?e:new Date(e):null,null==t&&null==e)return"";if(null==t)return S(e);if(null==e||t==e)return S(t);var a,n,i,o,u,l;return a=t.getUTCDate(),n=t.getUTCMonth(),i=t.getUTCFullYear(),o=e.getUTCDate(),u=e.getUTCMonth(),l=e.getUTCFullYear(),i!==l?r(t,"d MMM")+", "+i+" "+s(t,"hh:mm")+" - "+r(e,"d MMM")+", "+l+" "+s(e,"hh:mm"):n!=u&&!a!=o?r(t,"d MMM")+", "+s(t,"hh:mm")+" - "+r(e,"d MMM")+", "+s(e,"hh:mm"):s(t,"hh:mm")+" - "+s(e,"hh:mm")}function s(t,a){if(null==t)return"";t=_.isDate(t)?t:new Date(t);var r=t.getHours(),i=t.getMinutes(),o=t.getSeconds(),u="";return"en"==e.use()&&(u=r>=12?" PM":" AM",r%=12,0==r&&(r=12)),"hh:mm:ss"==a?""+n(r)+":"+n(i)+":"+n(o)+u:"hh:mm"==a?""+n(r)+":"+n(i)+u:""+n(r)+":"+n(i)+":"+n(o)+u}function g(t,a){return null==t?"":a?e.translate("MONTH_SHORT_"+t):e.translate("MONTH_"+t)}function y(t){return s(t,"hh:mm:ss")}function c(t){return s(t,"hh:mm")}function h(t){return null==t?"":(t=_.isDate(t)?t:new Date(t),i(t)+" "+y(t))}function S(t){return null==t?"":(t=_.isDate(t)?t:new Date(t),l(t)+" "+c(t))}function E(t,a){if(null==t)return"";t=_.isDate(t)?t:new Date(t);var n=new Date,i=Math.floor((n.getTime()+n.getTimezoneOffset()-(t.getTime()+t.getTimezoneOffset()))/1e3);if(i<1)return e.translate("ELAPSED_JUST_NOW");var o,u,l,D,d,m,T;if(T=i%60,i=Math.floor(i/60),m=i%60,i=Math.floor(i/60),d=i%24,i/=24,o=Math.floor(i/365),i-=365*o,u=Math.floor(i/30),D=Math.floor(i-30*u),D%7==0?(l=Math.floor(D/7),D=0):l=0,"interval"==a){var p="";return o&&(p+=" "+o+e.translate("ELAPSED_YEARS"),l=D=d=m=T=null),u&&(p+=" "+u+e.translate("ELAPSED_MONTHS"),D=d=m=T=null),l&&(p+=" "+l+e.translate("ELAPSED_WEEKS"),d=m=T=null),D&&(p+=" "+D+e.translate("ELAPSED_DAYS"),m=T=null),d&&(p+=" "+d+e.translate("ELAPSED_HOURS"),T=null),m&&(p+=" "+m+e.translate("ELAPSED_MINUTES")),T&&(p+=" "+T+e.translate("ELAPSED_SECONDS")),""!=p?p+" "+e.translate("ELAPSED_AGO"):e.translate("ELAPSED_JUST_NOW")}return o>0?r(t,"d MMM yyyy"):u>0||l>0||D>1?r(t,"MMM d")+", "+s(t,"hh:mm"):1==D?e.translate("ELAPSED_YESTERDAY")+", "+s(t,"hh:mm"):d>10?e.translate("ELAPSED_TODAY")+", "+s(t,"hh:mm"):d>0?""+d+" "+(d<2?e.translate("ELAPSED_HOUR_AGO"):d<5?e.translate("ELAPSED_HOURS_AGO"):e.translate("ELAPSED_HOURS_AGO_MORE_THAN_FIVE")):m>10?""+m+" "+e.translate("ELAPSED_MIN_AGO"):m>0?e.translate("ELAPSED_FEW_MIN_AGO"):e.translate("ELAPSED_JUST_NOW")}function O(t){return E(t,"interval")}function w(t){return Math.floor(t/1e3)}return{formatDate:r,formatLongDate:i,formatShortDate:l,formatShortDateWithYear:o,formatLongDateWithYear:u,formatLongMonth:D,formatMonth:g,formatYear:d,formatShortWeek:m,formatShortDayAndMonth:T,formatLongDayAndMonth:p,formatDateRange:M,formatDateTimeRange:f,formatTime:s,formatLongTime:y,formatShortTime:c,formatLongDateTime:h,formatShortDateTime:S,formatElapsedTime:E,formatElapsedInterval:O,formatMillisecondsToSeconds:w}}])}(),function(t,e){"use strict";var a=t.module("pipTimeRange",["pipUtils"]);a.directive("pipTimeRange",["pipUtils",function(t){return{restrict:"EA",scope:{pipStartDate:"=",pipEndDate:"="},templateUrl:"time_range/time_range.html",link:function(a,n,r){function i(t){return t?new Date(t):null}function o(){null!==a.pipStartDate&&void 0!==a.pipStartDate&&(a.data.start=e.isDate(a.pipStartDate)?a.pipStartDate:i(a.pipStartDate))}function u(){null!==a.pipEndDate&&void 0!==a.pipEndDate&&(a.data.end=e.isDate(a.pipEndDate)?a.pipEndDate:i(a.pipEndDate))}a.data={},a.data.start=null,a.data.end=null,o(),u(),t.toBoolean(r.pipRebind)&&(a.$watch("pipStartDate",function(){a.data.start=null,o()}),a.$watch("pipEndDate",function(){a.data.end=null,u()})),n.addClass("pip-time-range")}}}])}(window.angular,window._),function(t,e){"use strict";var a=t.module("pipTimeRangeEdit",["pipUtils","pipTranslate"]);a.directive("pipTimeRangeEdit",function(){return{restrict:"EA",scope:{pipStartDate:"=",pipChanged:"&",pipEndDate:"=",pipStartLabel:"@",pipEndLabel:"@",disabled:"&ngDisabled",pipSize:"="},templateUrl:"time_range_edit/time_range_edit.html",controller:"pipTimeRangeEditController"}}),a.controller("pipTimeRangeEditController",["$scope","$element","$attrs","pipDates","pipTranslate",function(t,a,n,r,i){function o(t){return t?new Date(t):null}function u(){var e,a;return t.data.startDate&&t.data.endDate?(e=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),a=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),a-e):null}function l(){var e,a,n;return t.data.startDate?(t.data.startTime||(t.data.endTime?t.data.startTime=0===t.data.endTime?0:t.data.endTime-30:(e=new Date,e=e.getTime()-r.toStartDay(e),t.data.startTime=30*Math.floor(e/18e5))),t.data.endDate?(a=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),void(t.data.duration?(n=new Date(a.getTime()+t.data.duration),t.data.endDate=r.toStartDay(n),n=n.getTime()-t.data.endDate.getTime(),t.data.endTime=30*Math.floor(n/18e5)):(n=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),a>=n&&(t.data.endDate=r.toStartDay(new Date(a.getTime()+18e5)),t.data.endTime=(t.data.startTime+30)%1440)))):void(t.data.endTime=null)):void(t.data.startTime=null)}function D(){var e,a,n;return t.data.endDate?(t.data.endTime||(t.data.startTime?t.data.endTime=1410===t.data.startTime?1410:t.data.startTime+30:(e=new Date,e=e.getTime()-r.toStartDay(e),t.data.endTime=30*Math.floor(e/18e5))),t.data.startDate?(a=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),n=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),a>=n&&(t.data.startDate=r.toStartDay(new Date(n.getTime()-18e5)),t.data.startTime=t.data.endTime%1440===0?1410:t.data.endTime-30),void(t.data.duration=u())):void(t.data.startTime=null)):void(t.data.endTime=null)}function d(){var e;t.data.bind=!1,t.data.startDate&&(e=t.data.startTime?60*t.data.startTime*1e3:0,t.pipStartDate=new Date(t.data.startDate.getTime()+e)),t.data.endDate&&(e=t.data.endTime?60*t.data.endTime*1e3:0,t.pipEndDate=new Date(t.data.endDate.getTime()+e)),t.data.bind=!0}function m(){var a,n;null!==t.pipStartDate&&void 0!==t.pipStartDate&&(a=e.isDate(t.pipStartDate)?t.pipStartDate:null,a||(a=o(t.pipStartDate)),t.data.startDate=r.toStartDay(a),t.data.startTime=(new Date(a)-t.data.startDate)/6e4),null!==t.pipEndDate&&void 0!==t.pipEndDate&&(n=e.isDate(t.pipEndDate)?t.pipEndDate:null,a||(n=o(t.pipEndDate)),t.data.endDate=r.toStartDay(n),t.data.endTime=(new Date(n)-t.data.endDate)/6e4),l(),t.data.duration=u(),d()}function T(){var t,a,n,r;for(t=[],a=0;a<24;a++)for(n=0;n<2;n++)r=30*n,t.push({id:60*a+r,time:e.pad(a.toString(),3,"0").substr(0,2)+":"+e.pad(r.toString(),2,"0")});return t}function p(){t.data.startDate=null,t.data.startTime=null,t.data.endDate=null,t.data.endTime=null,t.data.duration=null}t.intervalTimeCollection=T(),t.data={},t.startLabel=t.pipStartLabel?i.translate(t.pipStartLabel):i.translate("EVENT_NEW_START_TIME"),t.endLabel=t.pipEndLabel?i.translate(t.pipEndLabel):i.translate("EVENT_NEW_END_TIME"),p(),m(),t.onChangeStartDate=function(){l(),t.data.duration=u(),d(),t.pipChanged()},t.onChangeEndDate=function(){D(),t.data.duration=u(),d(),t.pipChanged()},t.onChangeStartTime=function(){t.data.startDate||(t.data.startDate=r.toStartDay(new Date)),l(),t.data.duration=u(),d(),t.pipChanged()},t.onChangeEndTime=function(){t.data.endDate||(t.data.endDate=r.toStartDay(new Date)),D(),t.data.duration=u(),d(),t.pipChanged()},t.isDisabled=function(){return!!t.disabled&&t.disabled()},t.$watchGroup([t.pipStartDate,t.pipEndDate],function(){t.data.bind&&(p(),m())}),t.$watch(t.disabled,function(e){t.disableControls=e}),a.addClass("pip-time-range-edit")}])}(window.angular,window._),function(){"use strict";var t=angular.module("pipDatesUtils",[]);t.factory("pipDates",function(){var t={};return t.addHours=function(t,e){t=_.isDate(t)?t:new Date(t);var a=t.getTime()+36e5*e;return new Date(a)},t.toStartDay=function(t){return t=_.isDate(t)?t:new Date(t),new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.toEndDay=function(t,e){t=_.isDate(t)?t:new Date(t),e=null!=e?e:0;var a=new Date(t.getFullYear(),t.getMonth(),t.getDate());return new Date(a.getTime()+864e5+e)},t.toStartWeek=function(t){t=_.isDate(t)?t:new Date(t);var e=t.getDay()?t.getDay():7;return t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),new Date(t.getTime()-24*(e-1)*36e5)},t.toEndWeek=function(t,e){t=_.isDate(t)?t:new Date(t),e=null!=e?e:0;var a=t.getDay()?t.getDay():7;return t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),new Date(t.getTime()+24*(8-a)*36e5+e)},t.toStartMonth=function(t){return t=_.isDate(t)?t:new Date(t),new Date(t.getFullYear(),t.getMonth(),1)},t.toEndMonth=function(t,e){t=_.isDate(t)?t:new Date(t);var a=t.getMonth()+1,n=t.getFullYear();return a>11&&(n++,a=0),t=new Date(n,a,1),null!=e&&(t=new Date(t.getTime()+e)),t},t.toStartYear=function(t){return t=_.isDate(t)?t:new Date(t),new Date(t.getFullYear(),0,1)},t.toEndYear=function(t,e){return t=_.isDate(t)?t:new Date(t),t=new Date(t.getFullYear()+1,0,1),null!=e&&(t=new Date(t.getTime()+e)),t},t.toUTCDate=function(t,e,a){return new Date(Date.UTC(t,e,a))},t.toUTCDate=function(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))},t.fromUTCDate=function(t){return null==t&&(t=new Date),new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},t.toUTCStartWeek=function(t){_.isDate(t)||(t=new Date(t),t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())));var e=t.getDay()?t.getDay():7;return t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),t=1!=e?new Date(t.getTime()-24*(e-1)*36e5):t,new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))},t.toUTCEndWeek=function(t,e){_.isDate(t)||(t=new Date(t),t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))),e=null!=e?e:0;var a=t.getDay()?t.getDay():7;return t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),t=new Date(t.getTime()+24*(8-a)*36e5+e),new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))},t})}();